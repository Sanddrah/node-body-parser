Description: use iconv instead of iconv-lite
 Before, body-parser depended on iconv-lite which has a slightly different
 API. Now body-parser depends on iconv.
Author: Andrew Kelley <superjoe30@gmail.com>
Forwarded: not-needed

--- node-body-parser-1.8.1.orig/lib/read.js
+++ nody-body-parser-1.8.1/lib/read.js
@@ -9,7 +9,7 @@
  */
 
 var getBody = require('raw-body')
-var iconv = require('iconv-lite')
+var Iconv = require('iconv').Iconv;
 var onFinished = require('on-finished')
 var typer = require('media-typer')
 var zlib = require('zlib')
@@ -86,7 +86,7 @@ function read(req, res, next, parse, options) {
     // parse
     try {
       body = typeof body !== 'string' && encoding !== null
-        ? iconv.decode(body, encoding)
+        ? iconvDecode(body, encoding)
         : body
       req.body = parse(body)
     } catch (err) {
@@ -101,6 +101,11 @@ function read(req, res, next, parse, options) {
   })
 }
 
+function iconvDecode(body, encoding) {
+  var iconv = new Iconv(encoding, 'utf-8');
+  return iconv.convert(body).toString('utf8');
+}
+
 /**
  * Get the content stream of the request.
  *
